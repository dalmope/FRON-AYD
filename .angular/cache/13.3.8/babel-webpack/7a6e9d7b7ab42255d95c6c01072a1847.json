{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\delmo\\\\Desktop\\\\Dev\\\\ayd\\\\FRON-AYD\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\delmo\\\\Desktop\\\\Dev\\\\ayd\\\\FRON-AYD\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nvar TOKEN_KEY = 'AuthToken';\nexport var TokenService = /*#__PURE__*/(function () {\n  var TokenService = /*#__PURE__*/function () {\n    function TokenService(router) {\n      _classCallCheck(this, TokenService);\n\n      this.router = router;\n      this.roles = [];\n    }\n\n    _createClass(TokenService, [{\n      key: \"setToken\",\n      value: function setToken(token) {\n        window.localStorage.removeItem(TOKEN_KEY);\n        window.localStorage.setItem(TOKEN_KEY, token);\n      }\n    }, {\n      key: \"getToken\",\n      value: function getToken() {\n        return localStorage.getItem(TOKEN_KEY);\n      }\n    }, {\n      key: \"isLogged\",\n      value: function isLogged() {\n        if (this.getToken()) {\n          return true;\n        }\n\n        return false;\n      }\n    }, {\n      key: \"getUserName\",\n      value: function getUserName() {\n        if (!this.isLogged()) {\n          return null;\n        }\n\n        var token = this.getToken();\n        var payload = token.split('.')[1];\n        var payloadDecoded = window.atob(payload);\n        var values = JSON.parse(payloadDecoded);\n        var username = values.sub;\n        return username;\n      }\n    }, {\n      key: \"isAdmin\",\n      value: function isAdmin() {\n        if (!this.isLogged()) {\n          return false;\n        }\n\n        var token = this.getToken();\n        var payload = token.split('.')[1];\n        var payloadDecoded = window.atob(payload);\n        var values = JSON.parse(payloadDecoded);\n        var roles = values.roles;\n\n        if (roles.indexOf('ROLE_ADMIN') < 0) {\n          return false;\n        }\n\n        return true;\n      }\n    }, {\n      key: \"logOut\",\n      value: function logOut() {\n        window.localStorage.clear();\n        this.router.navigate(['/login']);\n      }\n    }]);\n\n    return TokenService;\n  }();\n\n  TokenService.ɵfac = function TokenService_Factory(t) {\n    return new (t || TokenService)(i0.ɵɵinject(i1.Router));\n  };\n\n  TokenService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: TokenService,\n    factory: TokenService.ɵfac,\n    providedIn: 'root'\n  });\n  return TokenService;\n})();","map":null,"metadata":{},"sourceType":"module"}